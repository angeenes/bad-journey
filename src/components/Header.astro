---
import { SITE_TITLE } from "../consts";
import AddPicture from "@components/AddPicture.astro";
import Login from "@components/Login.astro";
---

<header
  class="header bg-white dark:bg-primary text-primary dark:text-white transition-colors"
>
  <a href="/" class="flex gap-4 justify-center items-center">
    <img src="/img/logo.webp" alt="logo Bad Journey" width="42" height="42" />
    <span class="uppercase font-black"> {SITE_TITLE}</span>
  </a>
  <section class="center"></section>
  <section class="flex gap-x-3 items-center">
    <Login />

    <svg
      id="btn-dark-mode"
      xmlns="http://www.w3.org/2000/svg"
      width="68"
      height="32"
      fill="none"
      class="scale-90 bg-slate-400 rounded-2xl cursor-pointer"
      ><path
        fill="#fff"
        d="M15 16c0-3.844 3.125-7 6.969-7 .375 0 .937.063 1.281.125a.334.334 0 0 1 .094.625 5.487 5.487 0 0 0-2.75 4.75 5.488 5.488 0 0 0 6.5 5.406c.312-.062.5.282.312.532A7.023 7.023 0 0 1 21.97 23C18.125 23 15 19.875 15 16Z"
      ></path>
      <path
        fill="#172328"
        d="M7 1c0-.531.438-1 1-1 .531 0 1 .469 1 1v1.5c0 .563-.469 1-1 1-.563 0-1-.438-1-1V1Zm4 7a3 3 0 0 1-3 3 2.98 2.98 0 0 1-3-3c0-1.656 1.313-3 3-3a3 3 0 0 1 3 3ZM0 8c0-.531.438-1 1-1h1.5c.531 0 1 .469 1 1 0 .563-.469 1-1 1H1c-.563 0-1-.438-1-1Zm15-1c.531 0 1 .469 1 1 0 .563-.469 1-1 1h-1.5c-.563 0-1-.438-1-1 0-.531.438-1 1-1H15Zm-7 9c-.563 0-1-.438-1-1v-1.5c0-.531.438-1 1-1 .531 0 1 .469 1 1V15c0 .563-.469 1-1 1Zm-5.719-2.281a.964.964 0 0 1 0-1.406l1-1a.964.964 0 0 1 1.406 0 .964.964 0 0 1 0 1.406l-1 1a.964.964 0 0 1-1.406 0Zm10-11.406a.964.964 0 0 1 1.406 0 .964.964 0 0 1 0 1.406l-1 1a.964.964 0 0 1-1.406 0 .964.964 0 0 1 0-1.407l1-1Zm1.406 11.406a.964.964 0 0 1-1.406 0l-1-1a.964.964 0 0 1 0-1.406.964.964 0 0 1 1.406 0l1 1a.964.964 0 0 1 0 1.406Zm-11.406-10a.964.964 0 0 1 0-1.406.964.964 0 0 1 1.406 0l1 1a.964.964 0 0 1 0 1.406.964.964 0 0 1-1.406 0l-1-1Z"
        style="transform: translate(42px, 8px);"></path>
      <rect
        width="24"
        height="24"
        x="40"
        y="4"
        fill="#fff"
        rx="12"
        id="btn-switch-dark-mode"
        class="btn-switch-dark-mode"></rect>
    </svg>

    <span class="hidden md:block"><AddPicture /></span>
  </section>
</header>

<style lang="scss">
  .header {
    position: fixed;
    top: 0;
    display: flex;
    z-index: 1;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    height: 80px;
    section,
    a {
      margin: 0 2rem;
    }
    .center {
      border-right: 1px solid white;
      padding-right: 1rem;
      margin-left: auto;
    }

    .btn-switch-dark-mode {
      transition: all 0.3s ease-in-out;
      transform: translateX(-33px);
      z-index: 2;
      cursor: pointer;
      &.active {
        transform: translateX(0);
      }
    }
  }
</style>

<script>
  import { ThemeManager } from "@classes/darkMode";

  const themeManager = new ThemeManager();
  const btnSwitchDarkMode = document.querySelector("#btn-dark-mode");
  const btnSwitchDarkModeSvg = document.querySelector("#btn-switch-dark-mode");
  if (btnSwitchDarkMode) {
    btnSwitchDarkMode.addEventListener("click", () => {
      themeManager.switchDarkMode();
      btnSwitchDarkModeSvg.classList.toggle("active");
    });
  }

  themeManager.setLightMode();
</script>
